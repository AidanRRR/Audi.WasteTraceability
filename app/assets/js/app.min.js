function appConfig(e,t){e.debugInfoEnabled(!0),t.html5Mode(!0)}function containerDetailController(e,t,n,i,o,r,a,c){function l(e){i.$broadcast("notification-push",e)}var s=this;s.filterPanel="app/containerDetail/filter.view.html",s.tableLoading=!0,s.dtOptions=o.newOptions().withPaginationType("full_numbers").withDisplayLength(1e3).withOption("order",[3,"desc"]),s.DTColumnDefBuilder=[r.newColumnDef(3).withOption("type","date-uk")],s.filteredActions,s.csvHeader=["Status","Probleem 1","Foto ID","Probleem 2","Foto ID","Datum"],t.getContainerByID(n.containerId).success(function(t){if(s.container=[],s.containerInfo=t.containers[0],e.setPageTitle('<span ng-switch-default class="container--'+t.containers[0].ct_type+'"><span class="icon__text">a</span></span> historiek '+s.containerInfo.con_name),t.containers[0].container_actions)for(var n in s.containerInfo.container_actions){var i=s.containerInfo.container_actions[n].issues,o={};i&&(o={one:!!i[0]&&i[0].it_description,image_one:!!i[0]&&i[0].iss_id,two:!!i[1]&&i[1].it_description,image_two:!!i[1]&&i[1].iss_id});var r={status:i?"error":"ok",problem_one:!!o&&o.one,image_one:!!o&&o.image_one,problem_two:!!o&&o.two,image_two:!!o&&o.image_two,date:moment(s.containerInfo.container_actions[n].ca_creation_dt,"YYYY-MM-DDTHH:mm:ssZ").format("DD/MM/YYYY HH:mm:ss")};s.container.push(r)}else notification={show:!0,status:"warning",message:"Er werden geen acties voor deze container gevonden."},l(notification);s.tableLoading=!1}),s.disableContainer=function(){t.disableContainer(s.containerInfo).success(function(e){c.reload(),notification={show:!0,status:"success",message:"Deze container werd gedeactiveerd."},l(notification)})},s.enableContainer=function(){t.enableContainer(s.containerInfo).success(function(e){c.reload(),notification={show:!0,status:"success",message:"Deze container werd geactiveerd."},l(notification)})},s.viewImage=function(e,t){a.open({template:"app/dialogs/viewImage.dialog.html",className:"ngdialog-theme-default dialog",controller:"dialogsController",controllerAs:"vm",data:{id:e,type:t}})},s.viewBarcode=function(e){a.open({template:"app/dialogs/reprintBarcode.dialog.html",className:"ngdialog-theme-default dialog",controller:"dialogsController",controllerAs:"vm",data:{barcode:e}})},s.updateFilter=function(t,n,i){e.updateFilter(t,n,i)},s.resetFilterValues=function(){s.filters={containerStatus:{all:!0,ok:!1,"Verkeerd gesorteerd":!1,"Defecte container":!1},containerDate:{all:!0,from:"Van",till:"Tot"}}},s.resetFilterValues()}function statusDetailFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):(this.containerFiltering[e.problem_one]||this.containerFiltering[e.problem_two])&&this.out.push(e)},n),n.out}}function dateDetailFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){if(this.containerFiltering.all)this.out.push(e);else{var n=moment(e.date,"DD/MM/YYYY HH:mm:ss").format("x"),i=moment(this.containerFiltering.from,"DD/MM/YYYY").format("x"),o=moment(this.containerFiltering.till,"DD/MM/YYYY").format("x");n>i&&n<o&&this.out.push(e)}},n),n.out}}function containerDetailRoutes(e){e.when("/container/:containerId",{templateUrl:"app/containerdetail/containerDetail.view.html",controller:"containerDetailController",controllerAs:"vm"})}function containerDetailService(e,t){var n=this;n.getContainerByID=function(n){return t.get(e+"/containers/full/"+n)},n.disableContainer=function(n){var i={bc_id:n.bc_id,ct_id:n.ct_id,name:n.con_name,active:"N"};return t.put(e+"/containers/"+n.con_id,JSON.stringify(i))},n.enableContainer=function(n){var i={bc_id:n.bc_id,ct_id:n.ct_id,name:n.con_name,active:"Y"};return t.put(e+"/containers/"+n.con_id,JSON.stringify(i))}}function containerInteractionsController(e,t,n,i){var o=this;o.tableLoading=!0,e.setPageTitle("containers - ledigingen"),o.filterPanel="app/containerInteractions/filter.view.html",o.dtOptions=n.newOptions().withPaginationType("full_numbers").withDisplayLength(1e3).withOption("order",[6,"desc"]),o.DTColumnDefBuilder=[i.newColumnDef(10).withOption("type","date-uk")],o.csvHeader=["Status","Container #","Kleur","Afvalstroom","Afdeling","Gebouw","Kostenplaats","Verdieping","Kolom","Actie","Laatste leging","Probleem","Probleem"],o.filteredActions,o.actions=[],t.getAllContainers().success(function(e){for(var t in e.containers){var n,i="",r={};for(var a in e.containers[t].container_actions){e.containers[t].container_actions[a].issues&&(n=e.containers[t].container_actions[a],i="error",r={problem_one:n.issues[0]?n.issues[0].it_description:"--",problem_two:n.issues[1]?n.issues[1].it_description:"--"});var c={status:i?i:"ok",con_name:e.containers[t].con_name,ct_type:e.containers[t].ct_type,wasteflow:e.containers[t].container_actions[a].wf_name_nl,department:e.containers[t].container_actions[a].dep_name,building:e.containers[t].container_actions[a].loc_name,cost_center:e.containers[t].container_actions[a].cc_name.replace("$",""),floor:e.containers[t].container_actions[a].ldx_floor_code,column:e.containers[t].container_actions[a].ldx_pillar_code,action:e.containers[t].container_actions[a].at_description,date:moment(e.containers[t].container_actions[a].ca_creation_dt,"YYYY-MM-DDTHH:mm:ssZ").format("DD/MM/YYYY HH:mm:ss"),problem_one:r&&r.problem_one?r.problem_one:"--",problem_two:r&&r.problem_two?r.problem_two:"--"};o.actions.push(c),n="",i="",r={}}}o.tableLoading=!1}),t.getAllDepartments().success(function(e){o.departments=e.items}),t.getAllLocations().success(function(e){o.locations=e.items}),t.getAllWasteFlows().success(function(e){o.wasteflows=e.items}),o.updateFilter=function(t,n,i){e.updateFilter(t,n,i)},o.resetFilterValues=function(){o.filters={containerStatus:{all:!0,ok:!1,"Verkeerd gesorteerd":!1,"Defecte container":!1},containerAction:{all:!0,"Plaatsen container":!1,"Ophalen container":!1},containerWasteflow:{all:!0,Restafval:!1,Papier:!1},containerType:{all:!0,black:!1,yellow:!1,orange:!1,gray:!1},containerDepartment:{all:!0,department:""},containerLocation:{all:!0,location:""},containerDate:{all:!0,from:"Van",till:"Tot"}}},o.resetFilterValues()}function newStatusFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):(this.containerFiltering[e.problem_one]||this.containerFiltering[e.problem_two])&&this.out.push(e)},n),n.out}}function actionFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering[e.action]&&this.out.push(e)},n),n.out}}function newWasteflowFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering[e.wasteflow]&&this.out.push(e)},n),n.out}}function typeFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering[e.ct_type]&&this.out.push(e)},n),n.out}}function departmentFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering.department===e.department&&this.out.push(e)},n),n.out}}function locationFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering.location===e.building&&this.out.push(e)},n),n.out}}function newDateFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){if(this.containerFiltering.all)this.out.push(e);else{var n=moment(e.date,"DD/MM/YYYY HH:mm:ss").format("x"),i=moment(this.containerFiltering.from,"DD/MM/YYYY").format("x"),o=moment(this.containerFiltering.till,"DD/MM/YYYY").format("x");n>i&&n<o&&this.out.push(e)}},n),n.out}}function containerInteractionsRoutes(e){e.when("/containers/interactions",{templateUrl:"app/containerinteractions/containerInteractions.view.html",controller:"containerInteractionsController",controllerAs:"vm"})}function containerInteractionsService(e,t){var n=this;n.getAllContainers=function(){return t.get(e+"/containers/full/")},n.getAllDepartments=function(){return t.get(e+"/departments/")},n.getAllLocations=function(){return t.get(e+"/locations/")},n.getAllWasteFlows=function(){return t.get(e+"/waste_flows/")}}function containerOverviewController(e,t,n,i,o){function r(e){o.$broadcast("notification-push",e)}var a=this;e.setPageTitle("container overzicht"),a.filterPanel="app/containerOverview/filter.view.html",a.tableLoading=!0,a.dtOptions=n.newOptions().withPaginationType("full_numbers").withDisplayLength(1e3).withOption("order",[6,"desc"]),a.DTColumnDefBuilder=[i.newColumnDef(9).withOption("type","date-uk")],a.csvHeader=["Id","Status","Container #","Kleur","Afvalstroom","Afdeling","Gebouw","Kostenplaats","Verdieping","Kolom","Laatste leging","Probleem","Probleem"],a.filteredContainers,t.getAllContainers().success(function(e){a.containers=[];for(var t in e.containers)if("Y"===e.containers[t].con_active){if(e.containers[t].container_actions){var n=e.containers[t].container_actions;n.sort(function(e,t){return e.ca_creation_dt>t.ca_creation_dt?-1:e.ca_creation_dt<t.ca_creation_dt?1:0})}}else delete e.containers[t];for(var t in e.containers){var i,o,r={},c="";e.containers[t].container_actions&&(i={wasteflow:e.containers[t].container_actions[0].wf_name_nl,department:e.containers[t].container_actions[0].dep_name,building:e.containers[t].container_actions[0].loc_name,costcenter:e.containers[t].container_actions[0].cc_name.replace("$",""),floor:e.containers[t].container_actions[0].ldx_floor_code,column:e.containers[t].container_actions[0].ldx_pillar_code,date:moment(e.containers[t].container_actions[0].ca_creation_dt,"YYYY-MM-DDTHH:mm:ssZ").format("DD/MM/YYYY HH:mm:ss")},e.containers[t].container_actions[0].issues&&(o=e.containers[t].container_actions[0],c="error",r={problem_one:o.issues[0]?o.issues[0].it_description:"--",problem_two:o.issues[1]?o.issues[1].it_description:"--"}));var l={id:e.containers[t].con_id,status:c?c:"ok",container_name:e.containers[t].con_name,type:e.containers[t].ct_type,wasteflow:i&&i.wasteflow?i.wasteflow:"--",department:i&&i.department?i.department:"--",building:i&&i.building?i.building:"--",costcenter:i&&i.costcenter?i.costcenter:"--",floor:i&&i.floor?i.floor:"--",column:i&&i.column?i.column:"--",date:i&&i.date?i.date:"--",problem_one:r&&r.problem_one?r.problem_one:"--",problem_two:r&&r.problem_two?r.problem_two:"--"};a.containers.push(l),i={},r={},o="",c=""}a.tableLoading=!1}).error(function(){notification={show:!0,status:"error",message:"Er is een probleem opgetreden tijdens het laden van de containers."},r(notification)}),t.getAllDepartments().success(function(e){a.departments=e.items}),t.getAllLocations().success(function(e){a.locations=e.items}),t.getAllWasteFlows().success(function(e){a.wasteflows=e.items}),t.getLastContainerAction().success(function(e){a.containeraction=e.items,"N"==a.containeraction[0].viewed&&(notification={show:!0,status:"success",message:"Er zijn nieuwe container interacties!"},r(notification)),t.postLastContainerActionViewed(a.containeraction[0])}),a.updateFilter=function(t,n,i){e.updateFilter(t,n,i)},a.resetFilterValues=function(){a.filters={containerStatus:{all:!0,ok:!1,"Verkeerd gesorteerd":!1,"Defecte container":!1},containerWasteflow:{all:!0},containerType:{all:!0,black:!1,yellow:!1,orange:!1,gray:!1},containerDepartment:{all:!0,department:""},containerLocation:{all:!0,location:""},containerDate:{all:!0,from:"Van",till:"Tot"}}},a.resetFilterValues()}function newTypeFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering[e.type]&&this.out.push(e)},n),n.out}}function newStatusFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):(this.containerFiltering[e.problem_one]||this.containerFiltering[e.problem_two])&&this.out.push(e)},n),n.out}}function newWasteflowFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering[e.wasteflow]&&this.out.push(e)},n),n.out}}function newDepartmentFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering.department===e.department&&this.out.push(e)},n),n.out}}function newLocationFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering.location===e.building&&this.out.push(e)},n),n.out}}function newDateFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){if(this.containerFiltering.all)this.out.push(e);else{var n=moment(e.date,"DD/MM/YYYY HH:mm:ss").format("x"),i=moment(this.containerFiltering.from,"DD/MM/YYYY").format("x"),o=moment(this.containerFiltering.till,"DD/MM/YYYY").format("x");n>i&&n<o&&this.out.push(e)}},n),n.out}}function containerOverviewRoutes(e){e.when("/",{templateUrl:"app/containerOverview/containerOverview.view.html",controller:"containerOverviewController",controllerAs:"vm"})}function containerOverviewService(e,t){var n=this;n.getAllContainers=function(){return t.get(e+"/containers/full/")},n.getAllDepartments=function(){return t.get(e+"/departments/")},n.getAllLocations=function(){return t.get(e+"/locations/")},n.getAllWasteFlows=function(){return t.get(e+"/waste_flows/")},n.getLastContainerAction=function(){var n=t.get(e+'/container_actions/?q={"$orderby":{"creation_dt":"desc"}}&limit=1');return n},n.postLastContainerActionViewed=function(n){var i={id:n.id,at_id:n.at_id,con_id:n.con_id,ldx_id:n.ldx_id,wf_id:n.wf_id,creation_device:n.creation_device,creation_dt:n.creation_dt,last_modification_device:n.last_modification_device,viewed:"Y"};return t({url:e+"/container_actions/"+i.id,method:"PUT",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}})}}function containerOverviewDeactivatedController(e,t,n){var i=this;i.tableLoading=!0,e.setPageTitle("Gedeactiveerde containers"),i.filterPanel="app/containeroverviewdeactivated/filter.view.html",i.dtOptions=n.newOptions().withPaginationType("full_numbers").withDisplayLength(1e3).withOption("order",[6,"desc"]),i.csvHeader=["Id","Status","Container #","Kleur","Afvalstroom","Afdeling","Gebouw","Laatste leging","Probleem","Probleem"],i.filteredContainers,t.getAllContainers().success(function(e){i.containers=[];for(var t in e.containers)if("N"===e.containers[t].con_active){if(e.containers[t].container_actions){var n=e.containers[t].container_actions;n.sort(function(e,t){return e.ca_creation_dt>t.ca_creation_dt?-1:e.ca_creation_dt<t.ca_creation_dt?1:0})}}else delete e.containers[t];for(var t in e.containers){var o,r,a={},c="";e.containers[t].container_actions&&(o={wasteflow:e.containers[t].container_actions[0].wf_name,department:e.containers[t].container_actions[0].dep_name,building:e.containers[t].container_actions[0].loc_name,date:moment(e.containers[t].container_actions[0].ca_creation_dt,"YYYY-MM-DDTHH:mm:ssZ").format("DD/MM/YYYY HH:mm:ss")},e.containers[t].container_actions[0].issues&&(r=e.containers[t].container_actions[0],c="error",a={problem_one:r.issues[0]?r.issues[0].it_description:"--",problem_two:r.issues[1]?r.issues[1].it_description:"--"}));var l={id:e.containers[t].con_id,status:c?c:"ok",container_name:e.containers[t].con_name,type:e.containers[t].ct_type,wasteflow:o&&o.wasteflow?o.wasteflow:"--",department:o&&o.department?o.department:"--",building:o&&o.building?o.building:"--",date:o&&o.date?o.date:"--",problem_one:a&&a.problem_one?a.problem_one:"--",problem_two:a&&a.problem_two?a.problem_two:"--"};i.containers.push(l)}i.tableLoading=!1}).error(function(){notification={show:!0,status:"error",message:"Er is een probleem opgetreden tijdens het laden van de containers."},broadcastEvent(notification)}),t.getAllDepartments().success(function(e){i.departments=e.items}),t.getAllLocations().success(function(e){i.locations=e.items}),t.getAllWasteFlows().success(function(e){i.wasteflows=e.items}),i.updateFilter=function(t,n,i){e.updateFilter(t,n,i)},i.resetFilterValues=function(){i.filters={containerStatus:{all:!0,ok:!1,"Verkeerd gesorteerd":!1,"Defecte container":!1},containerWasteflow:{all:!0,Restafval:!1,Papier:!1},containerType:{all:!0,black:!1,yellow:!1,orange:!1,gray:!1},containerDepartment:{all:!0,department:""},containerLocation:{all:!0,location:""},containerDate:{all:!0,from:"Van",till:"Tot"}}},i.resetFilterValues()}function newTypeFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering[e.type]&&this.out.push(e)},n),n.out}}function newStatusFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):(this.containerFiltering[e.problem_one]||this.containerFiltering[e.problem_two])&&this.out.push(e)},n),n.out}}function newWasteflowFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering[e.wasteflow]&&this.out.push(e)},n),n.out}}function newDepartmentFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering.department===e.department&&this.out.push(e)},n),n.out}}function newLocationFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){this.containerFiltering.all?this.out.push(e):this.containerFiltering.location===e.building&&this.out.push(e)},n),n.out}}function newDateFilter(){return function(e,t){var n={containerFiltering:t,out:[]};return angular.forEach(e,function(e,t){if(this.containerFiltering.all)this.out.push(e);else{var n=moment(e.date,"DD/MM/YYYY HH:mm:ss").format("x"),i=moment(this.containerFiltering.from,"DD/MM/YYYY").format("x"),o=moment(this.containerFiltering.till,"DD/MM/YYYY").format("x");n>i&&n<o&&this.out.push(e)}},n),n.out}}function containerOverviewDeactivatedRoutes(e){e.when("/containers/deactivated",{templateUrl:"app/containeroverviewdeactivated/containerOverviewDeactivated.view.html",controller:"containerOverviewDeactivatedController",controllerAs:"vm"})}function containerOverviewDeactivatedService(e,t){var n=this;n.getAllContainers=function(){return t.get(e+"/containers/full/")},n.getAllDepartments=function(){return t.get(e+"/departments/")},n.getAllLocations=function(){return t.get(e+"/locations/")},n.getAllWasteFlows=function(){return t.get(e+"/waste_flows/")}}function dialogsController(e,t,n,i,o,r){function a(e){n.$broadcast("notification-push",e)}function c(e){t.saveNewWasteflow(e).success(function(e){p.saving=!1,m={show:!0,status:"success",message:"De nieuwe afvalstroom werd succesvol opgeslagen."},a(m),i.closeThisDialog()}).error(function(e){p.saving=!1,e.includes("ORA-00001")&&(p.wasteflowError="Deze afvalstroom werd al toegevoegd.")})}function l(e,n,i){return t.checkExisting(e,n,i)}function s(e){p.saving=!0,t.saveNewBarcode(e.barcode).success(function(n){e.bc_id=n.id;var i=l(e.costcenter,"cost_centers","name");i.success(function(n){n.count?(e.cc_id=n.items[0].id,u(e)):t.saveNewLocationCostcenter(e).success(function(t){e.cc_id=t.id,u(e)})})})}function u(e){var n=l(e.department,"departments","name");n.success(function(n){n.count?(e.dep_id=n.items[0].id,d(e)):t.saveNewLocationDepartment(e).success(function(t){e.dep_id=t.id,d(e)})})}function d(e){var n=l(e.location,"locations","name");n.success(function(n){n.count?(e.loc_id=n.items[0].id,f(e)):t.saveNewLocation(e).success(function(t){e.loc_id=t.id,f(e)})})}function f(e){t.linkLocDepBar(e).success(function(e){p.saving=!1,m={show:!0,status:"success",message:"De nieuwe locatie werd succesvol opgeslagen."},a(m),i.closeThisDialog(),r.reload()})}var m,p=this;p.url=o+"/issues/image/",p.qrConfig={version:5,errorCorrectionLevel:"M",size:200},p.print=function(){window.print()},p.isLoading=!0,t.getAllWasteflows().success(function(e){p.isLoading=!1,p.wasteflows=e.items}),t.getAllLocations().success(function(e){p.locations=e.items}),t.getAllDepartments().success(function(e){p.departments={};for(var n in e.items)p.departments[e.items[n].name]=e.items[n].cc_id;t.getAllCostcenters().success(function(e){p.costcenters=e.items})}),p.onChangeSelectedDepartment=function(e){i.location.costcenter="",p.existing=!1;for(var t in p.costcenters)p.costcenters[t].id===p.departments[e]&&(i.location.costcenter=p.costcenters[t].name,p.existing=!0)},p.addNewContainer=function(e){p.containerError="",p.saving=!0,t.saveNewBarcode(e.name).success(function(n){e.bc_id=n.id,t.getContainerTypeByType(e.type).success(function(n){e.ct_id=n.items[0].id,t.saveNewContainer(e).success(function(e){p.saving=!1,m={show:!0,status:"success",message:"De nieuwe container werd succesvol opgeslagen."},a(m),i.closeThisDialog(),r.reload()})})}).error(function(e){p.saving=!1,e.includes("ORA-00001")&&(p.containerError="Deze container naam is al in gebruik. Kies een andere naam.")})},p.addNewLocation=function(e){e.barcode=e.location+"::"+e.department+"::"+e.costcenter+"::"+e.floor+"::"+e.pillar,p.validationErrors={barcode:""};var t=l(e.barcode,"barcodes","barcode");t.success(function(t){t.count?p.validationErrors.barcode="Deze locatie bestaat al.":s(e)})},p.addNewWasteflow=function(e){if(p.wasteflowError="",p.saving=!0,p.wasteflows.length)for(var t in p.wasteflows){if(e.nameNL.toLowerCase()===p.wasteflows[t].name_nl.toLowerCase()){p.wasteflowError="Deze afvalstroom werd al toegevoegd.",p.saving=!1;break}parseInt(t)===p.wasteflows.length-1&&c(e)}else c(e)}}function dialogsService(e,t){var n=this;n.checkExisting=function(n,i,o){return t.get(e+"/"+i+'/?q={"'+o+'":"'+n.toUpperCase()+'"}')},n.saveNewBarcode=function(n){var i={barcode:n.toUpperCase(),creation_user:"Audi milieudienst"};return t({url:e+"/barcodes/",method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}})},n.getContainerTypeByType=function(n){return t.get(e+'/container_types/?q={"type": "'+n+'"}')},n.saveNewContainer=function(n){var i={bc_id:n.bc_id,ct_id:n.ct_id,name:n.name.toUpperCase(),creation_user:"Audi milieudienst",active:"Y"};return t({url:e+"/containers/",method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}})},n.saveNewLocationCostcenter=function(n){var i={name:n.costcenter.toUpperCase(),creation_user:"Audi milieudienst"};return t({url:e+"/cost_centers/",method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}})},n.saveNewLocationDepartment=function(n){var i={cc_id:n.cc_id,name:n.department.toUpperCase(),creation_user:"Audi milieudienst"};return t({url:e+"/departments/",method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}})},n.getAllLocations=function(){return t.get(e+"/locations/")},n.getAllDepartments=function(){return t.get(e+"/departments/")},n.getAllCostcenters=function(){return t.get(e+"/cost_centers/")},n.saveNewLocation=function(n){var i={name:n.location.toUpperCase(),creation_user:"Audi milieudienst"};return t({url:e+"/locations/",method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}})},n.linkLocDepBar=function(n){var i={loc_id:n.loc_id,dep_id:n.dep_id,bc_id:n.bc_id,floor_code:n.floor,pillar_code:n.pillar};return t({url:e+"/loc_dep_xrefs/",method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}})},n.getAllWasteflows=function(){return t.get(e+"/waste_flows/")},n.saveNewWasteflow=function(n){var i={name_nl:n.nameNL,name_fr:n.nameFR,creation_user:"Audi milieudienst"};return t({url:e+"/waste_flows/",method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}})}}function globalService(){var e;return{getPageTitle:function(){return e},setPageTitle:function(t){e=t},updateFilter:function(e,t,n){switch(n){case"date":e.from="Van",e.till="Tot";break;case"dropdown":for(var i in e)t&&"all"!==i&&(e[i]="");break;default:for(var i in e)t?"all"!==i&&(e[i]=!1):"all"!==i&&e[i]&&(e.all=!1)}}}}function locationOverviewController(e,t,n,i){var o=this;e.setPageTitle("locatie overzicht"),o.tableLoading=!0,o.dtOptions=n.newOptions().withPaginationType("full_numbers").withDisplayLength(1e3),o.csvHeader=["Gebouw","Afdeling","Kostenplaats","Barcode"],t.getAllLocations().success(function(e){o.locations=[];for(var t in e.locations)for(var n in e.locations[t].loc_dep_refs){var i={location_name:e.locations[t].loc_name,department_name:e.locations[t].loc_dep_refs[n].dep_name,costcenter_name:e.locations[t].loc_dep_refs[n].cc_name.replace("$",""),floor:e.locations[t].loc_dep_refs[n].ldx_floor_code,pillar:e.locations[t].loc_dep_refs[n].ldx_pillar_code,barcode:e.locations[t].loc_dep_refs[n].bc_barcode};o.locations.push(i)}o.tableLoading=!1}),o.viewBarcode=function(e){i.open({template:"app/dialogs/reprintBarcode.dialog.html",className:"ngdialog-theme-default dialog",controller:"dialogsController",controllerAs:"vm",data:{barcode:e}})}}function locationOverviewRoutes(e){e.when("/locations",{templateUrl:"app/locationoverview/locationOverview.view.html",controller:"locationOverviewController",controllerAs:"vm"})}function locationOverviewService(e,t){var n=this;n.getAllLocations=function(){return t.get(e+"/locations/full/")}}function partialController(e,t,n,i){function o(){i(function(){r.notification={show:!1}},2e3)}var r=this;t.$watch(function(){return e.getPageTitle()},function(e){r.pageTitle=e}),t.$on("notification-push",function(e,t){r.notification=t,o()}),r.partials={header:"app/partials/header.view.html"},r.newDialog=function(e){n.open({template:"app/dialogs/"+e+".dialog.html",className:"ngdialog-theme-default dialog",controller:"dialogsController",controllerAs:"vm"})}}angular.module("audi",["ngRoute","ngAnimate","ngSanitize","ngCsv","ngDialog","datatables","720kb.datepicker","monospaced.qrcode"]),angular.module("audi").constant("baseUrl","http://audibxua0116:8080/ords/afvalusra").config(appConfig),appConfig.$inject=["$compileProvider","$locationProvider"],angular.module("audi").controller("containerDetailController",containerDetailController),containerDetailController.$inject=["globalService","containerDetailService","$routeParams","$rootScope","DTOptionsBuilder","DTColumnDefBuilder","ngDialog","$route"],$.extend(jQuery.fn.dataTableExt.oSort,{"date-uk-pre":function(e){return parseInt(moment(e,"DD/MM/YYYY HH:mm").format("X"),10)},"date-uk-asc":function(e,t){return e-t},"date-uk-desc":function(e,t){return t-e}}),angular.module("audi").filter("statusDetailFilter",statusDetailFilter).filter("dateDetailFilter",dateDetailFilter),angular.module("audi").config(containerDetailRoutes),containerDetailRoutes.$inject=["$routeProvider"],angular.module("audi").service("containerDetailService",containerDetailService),containerDetailService.$inject=["baseUrl","$http"],angular.module("audi").controller("containerInteractionsController",containerInteractionsController),containerInteractionsController.$inject=["globalService","containerInteractionsService","DTOptionsBuilder","DTColumnDefBuilder"],$.extend(jQuery.fn.dataTableExt.oSort,{"date-uk-pre":function(e){return parseInt(moment(e,"DD/MM/YYYY HH:mm").format("X"),10)},"date-uk-asc":function(e,t){return e-t},"date-uk-desc":function(e,t){return t-e}}),angular.module("audi").filter("newStatusFilter",newStatusFilter).filter("actionFilter",actionFilter).filter("newWasteflowFilter",newWasteflowFilter).filter("typeFilter",typeFilter).filter("departmentFilter",departmentFilter).filter("locationFilter",locationFilter).filter("newDateFilter",newDateFilter),angular.module("audi").config(containerInteractionsRoutes),containerInteractionsRoutes.$inject=["$routeProvider"],angular.module("audi").service("containerInteractionsService",containerInteractionsService),containerInteractionsService.$inject=["baseUrl","$http"],angular.module("audi").controller("containerOverviewController",containerOverviewController),containerOverviewController.$inject=["globalService","containerOverviewService","DTOptionsBuilder","DTColumnDefBuilder","$rootScope"],$.extend(jQuery.fn.dataTableExt.oSort,{"date-uk-pre":function(e){return parseInt(moment(e,"DD/MM/YYYY HH:mm").format("X"),10)},"date-uk-asc":function(e,t){return e-t},"date-uk-desc":function(e,t){return t-e}}),angular.module("audi").filter("newTypeFilter",newTypeFilter).filter("newStatusFilter",newStatusFilter).filter("newWasteflowFilter",newWasteflowFilter).filter("newDepartmentFilter",newDepartmentFilter).filter("newLocationFilter",newLocationFilter).filter("newDateFilter",newDateFilter),angular.module("audi").config(containerOverviewRoutes),containerOverviewRoutes.$inject=["$routeProvider"],angular.module("audi").service("containerOverviewService",containerOverviewService),containerOverviewService.$inject=["baseUrl","$http"],angular.module("audi").controller("containerOverviewDeactivatedController",containerOverviewDeactivatedController),containerOverviewDeactivatedController.$inject=["globalService","containerOverviewDeactivatedService","DTOptionsBuilder"],angular.module("audi").filter("newTypeFilter",newTypeFilter).filter("newStatusFilter",newStatusFilter).filter("newWasteflowFilter",newWasteflowFilter).filter("newDepartmentFilter",newDepartmentFilter).filter("newLocationFilter",newLocationFilter).filter("newDateFilter",newDateFilter),angular.module("audi").config(containerOverviewDeactivatedRoutes),containerOverviewDeactivatedRoutes.$inject=["$routeProvider"],angular.module("audi").service("containerOverviewDeactivatedService",containerOverviewDeactivatedService),containerOverviewDeactivatedService.$inject=["baseUrl","$http"],angular.module("audi").controller("dialogsController",dialogsController),dialogsController.$inject=["ngDialog","dialogsService","$rootScope","$scope","baseUrl","$route"],angular.module("audi").service("dialogsService",dialogsService),dialogsService.$inject=["baseUrl","$http"],angular.module("audi"),angular.module("audi").service("globalService",globalService),globalService.$inject=[],angular.module("audi").controller("locationOverviewController",locationOverviewController),locationOverviewController.$inject=["globalService","locationOverviewService","DTOptionsBuilder","ngDialog"],angular.module("audi").config(locationOverviewRoutes),locationOverviewRoutes.$inject=["$routeProvider"],angular.module("audi").service("locationOverviewService",locationOverviewService),locationOverviewService.$inject=["baseUrl","$http"],angular.module("audi").controller("partialController",partialController),partialController.$inject=["globalService","$scope","ngDialog","$timeout"];